This directory contains the Agda proofs about the Esterel Calculus.

Definitions from the paper reside in:

  * Figure 1. Esterel syntax: agda/Esterel/Lang.agda
              (including extensions in figure 13)

  * Figure 12. 
     Eval (rule in figure 19): agda/eval.agda
     ⇀ (rules in figure 14): agda/calculus.agda, called ⟶₁ 
     ≡e (rule in figure 19): agda/calculus.agda
     Can (rules in figure 15 and figure 16): agda/Esterel/Lang/CanFunction.agda
     ⊢CB (rules in figure 18): agda/Esterel/Lang/Binding.agda
        CB matches the shape in the figure, but the rules are
        in CorrectBinding

  * Figure 13:
     Environments: agda/Esterel/Environment.agda
     paused: agda/Esterel/Lang/Properties.agda 
     E contexts: agda/Esterel/Context.agda
     ↓p : agda/Esterel/Lang/Properties.agda, called ↓_

  * Figure 19: C contexts: agda/Esterel/Context.agda

Theorems in the paper reside in:

  * Theorem 3.1, correct binding is preserved by reduction:
    `⟶₁-preserve-CB` in `./calculus/properties.agda`.

  * Theorem 3.2, `Eval` is a function:
    `eval≡ₑ-consistent` in `./eval-props.agda`

  * Theorem 3.3, `≡ₑ` is consistent:
    `≡ₑ-consistent` in `./calculus/properties.agda`.

  * Theorem 5.1, induced equivalences of program fragments:
    `≡ₑ=>eval` in `./eval-props.agda`

  * Theorem 5.2: `ex9` in `./calculus-examples.agda`
  * Theorem 5.3: `ex1` in `./calculus-examples.agda`
  * Theorem 5.4: `ex2` in `./calculus-examples.agda`
  * Theorem 5.5: `ex3` in `./calculus-examples.agda`
  * Theorem 5.6: `ex4` in `./calculus-examples.agda`
  * Theorem 5.7: `ex8` in `./calculus-examples.agda`


The proof structure for the proof of consistency works as follows:

Define the caluclus.
  (`calculus.agda`)
Break the calculus into two parts, one containing only
the [par-swap] reduction rule and one containing the
remaining reduction rules.
  (`par-swap.agda` and `sn-calculus.agda`)
prove that the calculus without [par-swap] is strongly normalizing.
  (`sn-calculus-compatconf.agda` and `sn-calculus-confluence.agda`)
prove that the calculus without [par-swap] is locally confluent.
  (`noetherian.agda`)
prove by Newmans lemma that the calculus without [par-swap] is confluent.
  (`sn-calculus-props.agda`)
prove that the [par-swap] reduction rule itself is confluent.
  (`par-swap/confluent.agda`)
prove by Hindley-Rossen that the entire calculus is confluent.
  (`par-swap/union-confluent.agda`)
prove that the union of the [par-swap] reduction rule
and sn-calculus is equivalent to the formulation in `calculus.agda.`
  (`eval-props.agda`)
define the evaluator induced by the reduction relation.
  (`eval.agda`)
prove that the induced evaluator is consistent given
confluence of the reduction relation.
  (`eval-props.agda`)


Other files:
`all.agda` is generated by `../agda-all.rkt`, and imports the files here.
`binding-preserve.agda` proves that correct binding is preserved by reduction.
`blocked.agda` gives the property `blocked`, which is used as a helper in our proofs.
`calculus-examples.agda` contains the proofs of example equivalences (as discussed in the paper).
`context-properties.agda` gives various lemmas about `E` and `C` contexts.
`eval-props.agda` proves that the calculus is consistent w.r.t. its evaluator.
`stdlib013-fix.lagda` copies some proofs that are in the stdlib but private.

Esterel/Lang.agda, Esterel/Variable/*:
  definitions of the language syntax
Esterel/CompletionCode.agda:
  defines the exit codes
Esterel/Context.agda, Esterel/Context/*:
  defines the evaluation context, compatible closure and some properties.
Esterel/Lang/*: defines the language's notion of CorrectBinding and Can.
Esterel/Lang/CanFunction/*: Lemmas concerning the Can function.
Data/: Implements finite maps (used for environments)
